---
title: "Assigment 2"
output: html_notebook
---

```{r}
install.packages("readr")  # To be able to read in swedish characters with read_delim
install.packages("tidyverse")
```
```{r}
library(tidyverse)
library(lubridate)
library(hms)
library(readr)
```

```{r}
political_seats <- read_delim("./datasets/political_seats.csv", delim = ",", locale = locale(encoding = "ISO-8859-1"), skip = 2)
head(political_seats, show_col_types = FALSE)
```
```{r}
income <- read_delim("./datasets/income_statements.csv", delim = ",", locale = locale(encoding = "ISO-8859-1"), skip = 2)
income <- income[ , !(names(income) %in% "2022")]
income[income == ".."] <- "0"
income[is.na(income)] <- 0
income <- type.convert(income, as.is = T)
head(income, show_col_types = FALSE)
```

```{r}
income <- pivot_longer(income, cols= -c("region", "Income statement"), names_to ="year", values_to="values")
head(income)
```

```{r}
regions <- unique(income$region) 

tmp <- data.frame(matrix(ncol = ncol(income), nrow = 0)) 
colnames(tmp) <- colnames(income)

for (reg in regions) {
  vf <- subset(income, region == reg) 
  vf <- vf[order(vf$'Income statement', vf$year), ] 
  
  for (feat in unique(income$'Income statement')) {
    fea_df <- vf[vf$'Income statement' == feat, ]
    # gör rätt
    
    
    
    for (i in seq_len(nrow(fea_df))) {
     value = mean(fea_df[i:(i + 3), 'values'])
    }
  }
}
```




